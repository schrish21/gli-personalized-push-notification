"use strict";(self["webpackChunkvuejs_personalized_push_notif"]=self["webpackChunkvuejs_personalized_push_notif"]||[]).push([[939],{5939:function(t,e,a){a.r(e),a.d(e,{default:function(){return K}});var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-card",{attrs:{flat:"",tile:"",width:"100%"}},[a("div",{staticClass:"d-flex flex-column justify-start mb-6 mx-4 px-8 py-2"},[a("div",{staticClass:"d-flex justify-start"},[a("p",{staticClass:"overline grey--text lighten-3 ma-0 pa-0 text-caption",staticStyle:{"font-size":"10px !important"}},[t._v(" MOENGAGE > ")]),a("p",{staticClass:"overline black--text ma-0 pa-0 text-caption",staticStyle:{"font-size":"10px !important"}},[t._v(" Â  PUSH NOTIFICATIONS ")])]),a("h3",{staticClass:"primary--text lighten-3 font-weight-medium ma-0 pa-0"},[t._v(" All Campaigns ")])])]),a("AllCampaign",{staticClass:"mx-5",staticStyle:{"background-color":"#fff"}})],1)},i=[],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",[a("v-dialog",{attrs:{persistent:"",width:"300"},model:{value:t.loadingDialog,callback:function(e){t.loadingDialog=e},expression:"loadingDialog"}},[a("v-card",{attrs:{color:"primary",dark:""}},[a("v-card-text",{staticClass:"pa-2 pl-4 pr-4 pb-4"},[t._v(" Loading, please wait "),a("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1)],1),a("v-dialog",{attrs:{"max-width":"290"},model:{value:t.dialog.confirmDelete,callback:function(e){t.$set(t.dialog,"confirmDelete",e)},expression:"dialog.confirmDelete"}},[a("v-card",[a("v-card-title",{staticClass:"text-h5"},[t._v(" Delete ")]),a("v-card-text",[t._v(" Are you sure you want to delete Campaign? ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"grey darken-1",text:""},on:{click:function(e){t.dialog.confirmDelete=!1}}},[t._v(" NO ")]),a("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:function(){t.dialog.confirmDelete=!1,t.onDelete(t.tempDelete)}}},[t._v(" YES ")])],1)],1)],1),a("v-card",[a("v-row",{staticClass:"mx-4 mt-0 mb-4 px-3 pt-6 pb-3",staticStyle:{display:"flex"}},[a("div",{staticClass:"ml-auto",staticStyle:{display:"flex","justify-content":"center","align-items":"center"}},[a("h6",{staticClass:"mt-1",staticStyle:{"font-weight":"300","font-size":"12px"}},[t._v(" Last Updated: "+t._s(t.lastUpdate)+" ")]),a("span",{staticClass:"pl-3 bar-icon"},[a("v-btn",{staticStyle:{color:"blue"},attrs:{depressed:"","x-small":"",color:"white"},on:{click:function(e){return t.refreshTable()}}},[a("v-icon",{attrs:{color:"blue"}},[t._v("mdi-refresh")]),t._v("Refresh ")],1)],1)])]),a("v-divider"),a("div",{staticClass:"d-flex flex-row",staticStyle:{width:"100% !important"}},[a("div",{staticClass:"ma-0 pa-0",staticStyle:{width:"100% !important"}},[a("v-toolbar",{staticClass:"mt-2 px-3",attrs:{flat:""}},[a("v-text-field",{staticClass:"px-2",staticStyle:{width:"2%"},attrs:{value:t.search,"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-spacer"),a("div",{staticStyle:{display:"flex","justify-content":"center",width:"15% !important"},on:{click:function(e){return t.route("add-campaign")}}},[a("v-btn",{staticClass:"white--text",staticStyle:{"font-size":"12px",width:"100% !important"},attrs:{height:"35px",width:"100%",block:"",color:"#05A5B7"}},[a("v-icon",{staticClass:"mr-2",attrs:{color:"white"}},[t._v("mdi-plus")]),t._v("Add Campaign")],1)],1)],1),a("v-card",{staticClass:"my-4 px-3",attrs:{flat:""}},[a("v-card-text",{staticClass:"py-1"},[a("v-data-table",{attrs:{headers:t.headers,items:t.data,search:t.search},scopedSlots:t._u([{key:"item.amnm_start_date_push",fn:function(e){var n=e.item;return[a("div",{class:t.checkColor(n)},[t._v(" "+t._s(n.amnm_start_date_push)+" ")])]}},{key:"item.amnm_flag_member",fn:function(e){var n=e.item;return[a("v-checkbox",{attrs:{color:"green darken-2",readonly:""},model:{value:n.amnm_flag_member,callback:function(e){t.$set(n,"amnm_flag_member",e)},expression:"item.amnm_flag_member"}})]}},{key:"item.amnm_flag_status",fn:function(e){var n=e.item;return[a("v-checkbox",{attrs:{color:"green darken-2",readonly:""},model:{value:n.amnm_flag_status,callback:function(e){t.$set(n,"amnm_flag_status",e)},expression:"item.amnm_flag_status"}})]}},{key:"item.actions",fn:function(e){var n=e.item;return[a("v-icon",{staticClass:"mr-1",attrs:{small:"",color:"blue"},on:{click:function(e){return t.onView(n)}}},[t._v(" mdi-eye ")]),a("v-icon",{staticClass:"mr-1",attrs:{disabled:!t.checkActions(n),small:"",color:"green"},on:{click:function(e){return t.onEdit(n)}}},[t._v(" mdi-pencil-outline ")]),a("v-icon",{attrs:{disabled:!t.checkActions(n),small:"",color:"error"},on:{click:function(e){return t.onDeleteConfirm(n)}}},[t._v(" mdi-trash-can-outline ")])]}}],null,!0)})],1)],1)],1)])],1)],1)},s=[],l=a(6198),o=(a(5666),a(8815)),c=a(9669),u=a.n(c),m={name:"AllCampaign",data:function(){return{loadingDialog:!1,dateNow:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),lastUpdate:(new Date).toLocaleString(),search:"",textInputRules:[function(t){return!!t||"Kolom harus diisi"}],dialog:{input:!1,input2:!1,confirmDelete:!1},headers:[{text:"ID",align:"start",value:"amnm_id",class:"style-header",width:"10px"},{text:"Campaign Name",value:"amnm_campaign_name",class:"style-header",width:"10px"},{text:"Notif Delivery",value:"amnm_campaign_delivery",class:"style-header",width:"10px"},{text:"Start Date Push",value:"amnm_start_date_push",class:"style-header",width:"10px"},{text:"Flag Member",value:"amnm_flag_member",class:"style-header",width:"10px"},{text:"Active Status",value:"amnm_flag_status",class:"style-header",width:"10px"},{text:"Actions",value:"actions",class:"style-header",sortable:!1,width:"10px"}],master_data:[],data:[],tempDelete:null,tempUpdate:null}},mounted:function(){this.getAllCampaign()},methods:{getAllCampaign:function(){var t=this;return(0,l.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loadingDialog=!0,e.prev=1,e.next=4,u().get(o.YZ+"get-all-campaign?token="+o.Fw,o.C_).then((function(e){t.master_data=e.data.data,t.data=e.data.data,t.data!=[]&&(t.data||alert("Cannot get campaign data! Please try again."))})).catch((function(t){console.log("AllCampaign.vue (error) :: ",t),alert("Cannot get campaign data! Server timeout.")}));case 4:if(t.data){e.next=7;break}return t.loadingDialog=!1,e.abrupt("return");case 7:e.next=14;break;case 9:return e.prev=9,e.t0=e["catch"](1),console.error(e.t0),alert("Error: connection failed"),e.abrupt("return");case 14:t.loadingDialog=!1;case 15:case"end":return e.stop()}}),e,null,[[1,9]])})))()},checkActions:function(t){var e=Date.parse(new Date),a=Date.parse(t.amnm_start_date_push);return 1!=t.amnm_flag_member&&(1!=t.amnm_flag_status&&!(e>a))},checkColor:function(t){var e=Date.parse(new Date),a=Date.parse(t.amnm_start_date_push);return e>a?"red--text":e<a?"green--text":"orange--text"},onView:function(t){this.$router.push({name:"edit-campaign",params:{campaign_data:t,viewMode:!0}}).catch((function(t){console.log(t)}))},onEdit:function(t){var e=this;return(0,l.Z)(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(1!=t.amnm_flag_member){a.next=5;break}return alert("Campaign with generated member cannot be edit."),a.abrupt("return",!1);case 5:if(1!=t.amnm_flag_status){a.next=10;break}return alert("Completed campaign cannot be edit."),a.abrupt("return",!1);case 10:return e.$router.push({name:"edit-campaign",params:{campaign_data:t,viewMode:!1}}).catch((function(t){console.log(t)})),a.abrupt("return",!0);case 12:case"end":return a.stop()}}),a)})))()},onDeleteConfirm:function(t){if(1==t.amnm_flag_member)alert("Campaign with generated member cannot be removed.");else{if(1!=t.amnm_flag_status)return this.tempDelete=t,this.dialog.confirmDelete=!0,!0;alert("Completed campaign cannot be removed.")}},onDelete:function(t){var e=this;return(0,l.Z)(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.loadingDialog=!0,a.prev=1,a.next=4,u().post(o.YZ+"delete-campaign?token="+o.Fw+"&amnm_id="+t.amnm_id,o.C_).then((function(t){"success"==t.data.response_message?(e.refreshTable(),alert("Campaign deleted!")):(console.log(t.data),alert("Cannot delete campaign! Please try again."))})).catch((function(t){console.log("AllCampaign.vue (error) :: ",t),alert("Cannot delete campaign! Server timeout.")}));case 4:a.next=11;break;case 6:return a.prev=6,a.t0=a["catch"](1),console.error(a.t0),alert("Error: connection failed"),a.abrupt("return");case 11:e.tempDelete=null,e.refreshTable(),e.loadingDialog=!1;case 14:case"end":return a.stop()}}),a,null,[[1,6]])})))()},refreshTable:function(){var t=this;return(0,l.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loadingDialog=!0,t.lastUpdate=(new Date).toLocaleString(),t.data=[],e.prev=3,e.next=6,u().get(o.YZ+"get-all-campaign?token="+o.Fw,o.C_).then((function(e){t.master_data=e.data.data,t.data=e.data.data,t.data!=[]&&(t.data||alert("Cannot get campaign data! Please try again."))})).catch((function(t){console.log("AllCampaign.vue (error) :: ",t),alert("Cannot get campaign data! Server timeout.")}));case 6:if(t.data){e.next=9;break}return t.loadingDialog=!1,e.abrupt("return");case 9:e.next=16;break;case 11:return e.prev=11,e.t0=e["catch"](3),console.error(e.t0),alert("Error: connection failed"),e.abrupt("return");case 16:t.loadingDialog=!1;case 17:case"end":return e.stop()}}),e,null,[[3,11]])})))()},route:function(t){this.$router.push({name:t}).catch((function(t){console.log(t)}))}}},d=m,p=a(1001),h=a(3453),f=a.n(h),v=a(680),g=a(2371),_=a(7118),x=a(3274),b=a(4367),C=(a(1539),a(9714),a(172)),k=a(8230),y=(a(7327),a(6286)),w=a(144),D=w.Z.extend({name:"rippleable",directives:{ripple:y.Z},props:{ripple:{type:[Boolean,Object],default:!0}},methods:{genRipple:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.ripple?(t.staticClass="v-input--selection-controls__ripple",t.directives=t.directives||[],t.directives.push({name:"ripple",value:{center:!0}}),this.$createElement("div",t)):null}}}),S=a(4419),V=a(3325);function I(t){t.preventDefault()}var Z=(0,V.Z)(k.Z,D,S.Z).extend({name:"selectable",model:{prop:"inputValue",event:"change"},props:{id:String,inputValue:null,falseValue:null,trueValue:null,multiple:{type:Boolean,default:null},label:String},data:function(){return{hasColor:this.inputValue,lazyValue:this.inputValue}},computed:{computedColor:function(){if(this.isActive)return this.color?this.color:this.isDark&&!this.appIsDark?"white":"primary"},isMultiple:function(){return!0===this.multiple||null===this.multiple&&Array.isArray(this.internalValue)},isActive:function(){var t=this,e=this.value,a=this.internalValue;return this.isMultiple?!!Array.isArray(a)&&a.some((function(a){return t.valueComparator(a,e)})):void 0===this.trueValue||void 0===this.falseValue?e?this.valueComparator(e,a):Boolean(a):this.valueComparator(a,this.trueValue)},isDirty:function(){return this.isActive},rippleState:function(){return this.isDisabled||this.validationState?this.validationState:void 0}},watch:{inputValue:function(t){this.lazyValue=t,this.hasColor=t}},methods:{genLabel:function(){var t=k.Z.options.methods.genLabel.call(this);return t?(t.data.on={click:I},t):t},genInput:function(t,e){return this.$createElement("input",{attrs:Object.assign({"aria-checked":this.isActive.toString(),disabled:this.isDisabled,id:this.computedId,role:t,type:t},e),domProps:{value:this.value,checked:this.isActive},on:{blur:this.onBlur,change:this.onChange,focus:this.onFocus,keydown:this.onKeydown,click:I},ref:"input"})},onClick:function(t){this.onChange(),this.$emit("click",t)},onChange:function(){var t=this;if(this.isInteractive){var e=this.value,a=this.internalValue;if(this.isMultiple){Array.isArray(a)||(a=[]);var n=a.length;a=a.filter((function(a){return!t.valueComparator(a,e)})),a.length===n&&a.push(e)}else a=void 0!==this.trueValue&&void 0!==this.falseValue?this.valueComparator(a,this.trueValue)?this.falseValue:this.trueValue:e?this.valueComparator(a,e)?null:e:!a;this.validate(!0,a),this.internalValue=a,this.hasColor=a}},onFocus:function(t){this.isFocused=!0,this.$emit("focus",t)},onBlur:function(t){this.isFocused=!1,this.$emit("blur",t)},onKeydown:function(t){}}}),A=["title"],$=Z.extend({name:"v-checkbox",props:{indeterminate:Boolean,indeterminateIcon:{type:String,default:"$checkboxIndeterminate"},offIcon:{type:String,default:"$checkboxOff"},onIcon:{type:String,default:"$checkboxOn"}},data:function(){return{inputIndeterminate:this.indeterminate}},computed:{classes:function(){return(0,b.Z)((0,b.Z)({},k.Z.options.computed.classes.call(this)),{},{"v-input--selection-controls":!0,"v-input--checkbox":!0,"v-input--indeterminate":this.inputIndeterminate})},computedIcon:function(){return this.inputIndeterminate?this.indeterminateIcon:this.isActive?this.onIcon:this.offIcon},validationState:function(){if(!this.isDisabled||this.inputIndeterminate)return this.hasError&&this.shouldValidate?"error":this.hasSuccess?"success":null!==this.hasColor?this.computedColor:void 0}},watch:{indeterminate:function(t){var e=this;this.$nextTick((function(){return e.inputIndeterminate=t}))},inputIndeterminate:function(t){this.$emit("update:indeterminate",t)},isActive:function(){this.indeterminate&&(this.inputIndeterminate=!1)}},methods:{genCheckbox:function(){var t=this.attrs$,e=(t.title,(0,x.Z)(t,A));return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.$createElement(C.Z,this.setTextColor(this.validationState,{props:{dense:this.dense,dark:this.dark,light:this.light}}),this.computedIcon),this.genInput("checkbox",(0,b.Z)((0,b.Z)({},e),{},{"aria-checked":this.inputIndeterminate?"mixed":this.isActive.toString()})),this.genRipple(this.setTextColor(this.rippleState))])},genDefaultSlot:function(){return[this.genCheckbox(),this.genLabel()]}}}),E=a(6957),T=a(5532),R=a(1418),B=a(6428),F=a(7003),O=a(2877),z=a(9762),j=a(5978),L=a(6656),M=(0,p.Z)(d,r,s,!1,null,null,null),N=M.exports;f()(M,{VBtn:v.Z,VCard:g.Z,VCardActions:_.h7,VCardText:_.ZB,VCardTitle:_.EB,VCheckbox:$,VDataTable:E.Z,VDialog:T.Z,VDivider:R.Z,VIcon:B.Z,VProgressLinear:F.Z,VRow:O.Z,VSpacer:z.Z,VTextField:j.Z,VToolbar:L.Z});var P={name:"Dashboard",components:{AllCampaign:N},data:function(){return{tab:null}},mounted:function(){localStorage.user_fname||(this.$router.push({name:"login"}).catch((function(t){console.log(t)})),localStorage.removeItem("user_fname"),localStorage.removeItem("user_lname"),localStorage.removeItem("token"),localStorage.removeItem("nik"));var t=Date.parse(new Date),e=Date.parse(localStorage.date_end_push_notif);e<t&&(this.$router.push({name:"login"}).catch((function(t){console.log(t)})),localStorage.removeItem("user_fname"),localStorage.removeItem("user_lname"),localStorage.removeItem("token"),localStorage.removeItem("nik"))},created:function(){this.user=this.$store.state.u},methods:{}},U=P,Y=(0,p.Z)(U,n,i,!1,null,null,null),K=Y.exports;f()(Y,{VCard:g.Z})}}]);